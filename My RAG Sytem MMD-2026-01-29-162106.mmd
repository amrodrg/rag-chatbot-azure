---
config:
  layout: dagre
---
flowchart LR
 subgraph UserLayer["User Layer"]
        U["User\nBrowser / Mobile App"]
  end
 subgraph FE["Frontend (Azure Static Web Apps)"]
        UI["React / Streamlit UI"]
  end
 subgraph BE["Backend API Azure App Service (FastAPI / Flask)"]
        API["REST / WebSocket Endpoint / ask"]
  end
 subgraph AI["AI Services"]
        AOAI["Azure OpenAI - GPT-4 Chat Completion - Embedding Model"]
        ACS["Azure Cognitive Search Vector Index + Hybrid Search"]
  end
 subgraph Storage["Storage & Security"]
        BLOB["Azure Blob Storage (PDFs, Data Chunks)"]
        KV["Azure Key Vault API Keys, Secrets"]
        INS["Application Insights Logs, Metrics, Traces"]
  end
 subgraph DevOps["DevOps Pipeline"]
        GH["GitHub Repository"]
        GA["GitHub Actions\nCI/CD Deployment"]
  end
    U -- HTTP(S) --> UI
    UI -- Chat Request --> API
    API -- "Embedding Request (text-embedding-3-small)" --> AOAI
    API -- Semantic Search Vector Query --> ACS
    ACS -- Retrieve Relevant Chunks --> API
    API -- Chat Completion Request --> AOAI
    API -- Formatted Answer --> UI
    ACS -- Indexing Reads --> BLOB
    API -- Get Secrets --> KV
    API -- Telemetry --> INS
    GH -- Push / PR --> GA
    GA -- Deploy Frontend --> FE
    GA -- Deploy Backend --> BE
    n1["Untitled Node"]